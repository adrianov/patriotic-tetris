<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="format-detection" content="telephone=no">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Patriotic Tetris</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="icon" type="image/svg+xml" href="assets/svg/eagle.svg">
    <!-- Arcade display font (Tetris vibe, less pixelated) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/style.css">
</head>

<body>
    <main class="game-container">
        <section class="game-sidebar">
            <div class="score-panel">
                <h2>Score</h2>
                <div id="score" class="score-value">0</div>
            </div>

            <div class="level-panel">
                <h2>Level</h2>
                <div id="level" class="level-value">1</div>
            </div>

            <div class="next-piece-panel">
                <h2>Next Piece</h2>
                <canvas id="next-piece" width="80" height="80"></canvas>
            </div>

            <div class="controls-panel">
                <h2>Controls</h2>
                <div class="controls-list">
                    <div class="control-item">
                        <span class="key">‚Üê‚Üí</span> Move
                    </div>
                    <div class="control-item">
                        <span class="key">‚Üë</span> Rotate
                    </div>
                    <div class="control-item">
                        <span class="key">‚Üì</span> Clockwise
                    </div>
                    <div class="control-item">
                        <span class="key">Space</span> Drop
                    </div>
                    <div class="control-item">
                        <span class="key">P</span> Pause
                    </div>
                    <div class="control-item">
                        <span class="key">R</span> Restart
                    </div>
                    <div class="control-item">
                        <span class="key">M</span> Mute
                    </div>
                    <div class="control-item">
                        <span class="key">G</span> Ghost Piece <span id="ghost-toggle">ON</span>
                    </div>
                    <div class="control-item">
                        <span class="key">+</span> Speed Up
                    </div>
                </div>
            </div>
        </section>

        <div class="mobile-top-row">
            <section class="game-board-container">
                <canvas id="game-board" width="300" height="600"></canvas>
                <div id="game-over" class="game-over hidden">
                    <h2>Game Over</h2>
                    <div id="new-high-score" class="new-high-score hidden">NEW HIGH SCORE!</div>
                    <p>Final Score: <span id="final-score">0</span></p>
                    <button id="restart-btn" class="restart-btn">Play Again</button>
                </div>
                <div id="paused" class="paused-overlay hidden">
                    <h2>PAUSED</h2>
                    <p>Press P to resume</p>
                </div>
            </section>

            <!-- Mobile side panel -->
            <aside class="mobile-side-panel" aria-label="Mobile info panel">
                <div class="theme-buttons mobile-flags" role="group" aria-label="Theme selector">
                    <button class="theme-btn theme-btn-flag" type="button" data-theme="modern" aria-pressed="true"
                        aria-label="Modern Russia" title="Modern Russia">
                        <span class="theme-flag theme-flag-modern" aria-hidden="true"></span>
                    </button>
                    <button class="theme-btn theme-btn-flag" type="button" data-theme="imperial" aria-pressed="false"
                        aria-label="Imperial Russia" title="Imperial Russia">
                        <span class="theme-flag theme-flag-imperial" aria-hidden="true"></span>
                    </button>
                    <button class="theme-btn theme-btn-flag" type="button" data-theme="soviet" aria-pressed="false"
                        aria-label="Soviet" title="Soviet">
                        <span class="theme-flag theme-flag-soviet" aria-hidden="true"></span>
                    </button>
                </div>
                <canvas id="mobile-next-piece" width="64" height="64" aria-label="Next piece"></canvas>
                <div class="mobile-stats" aria-label="Status">
                    <div class="mobile-stat"><span>Score</span><span id="m-score">0</span></div>
                    <div class="mobile-stat"><span>Level</span><span id="m-level">1</span></div>
                    <div class="mobile-stat"><span>Lines</span><span id="m-lines">0</span></div>
                    <div class="mobile-stat"><span>Time</span><span id="m-time">00:00</span></div>
                    <div class="mobile-stat"><span>High</span><span id="m-high">0</span></div>
                </div>
                <div class="touch-toggles mobile-toggles" aria-label="Quick actions">
                    <button class="touch-toggle-btn" id="touch-ghost">
                        <span class="touch-toggle-icon">üëª</span>
                        <span class="touch-toggle-label">GHOST</span>
                    </button>
                    <button class="touch-toggle-btn" id="touch-pause">
                        <span class="touch-toggle-icon">‚è∏Ô∏è</span>
                        <span class="touch-toggle-label">PAUSE</span>
                    </button>
                    <button class="touch-toggle-btn" id="touch-restart">
                        <span class="touch-toggle-icon">üîÑ</span>
                        <span class="touch-toggle-label">RESTART</span>
                    </button>
                    <button class="touch-toggle-btn" id="touch-sound">
                        <span class="touch-toggle-icon">üîä</span>
                        <span class="touch-toggle-label">SOUND</span>
                    </button>
                </div>
            </aside>
        </div>

        <div class="touch-controls">
            <div class="touch-dpad">
                <button class="touch-dpad-btn touch-up" id="touch-rotate">‚Üë</button>
                <div class="touch-dpad-middle">
                    <button class="touch-dpad-btn touch-left" id="touch-left">‚Üê</button>
                    <button class="touch-dpad-btn touch-down" id="touch-down">‚Üì</button>
                    <button class="touch-dpad-btn touch-right" id="touch-right">‚Üí</button>
                </div>
            </div>
        </div>

        <section class="game-sidebar">
            <div class="theme-panel">
                <h2>Themes</h2>
                <div class="theme-buttons" role="group" aria-label="Theme selector">
                    <button class="theme-btn" type="button" data-theme="modern" aria-pressed="true"
                        title="Modern Russia">
                        <span class="theme-flag theme-flag-modern" aria-hidden="true"></span>
                        Modern
                    </button>
                    <button class="theme-btn" type="button" data-theme="imperial" aria-pressed="false"
                        title="Imperial Russia">
                        <span class="theme-flag theme-flag-imperial" aria-hidden="true"></span>
                        Imperial
                    </button>
                    <button class="theme-btn" type="button" data-theme="soviet" aria-pressed="false"
                        title="Soviet (Moscow)">
                        <span class="theme-flag theme-flag-soviet" aria-hidden="true"></span>
                        Soviet
                    </button>
                </div>
            </div>

            <div class="brand-panel">
                <h2 class="brand-title">Patriotic Tetris</h2>
                <img src="assets/svg/eagle.svg" alt="Imperial Eagle" class="brand-eagle">
            </div>

            <div class="audio-controls">
                <h2>Audio</h2>
                <button id="mute-btn" class="audio-btn">üîä Sound On</button>
                <input type="range" id="volume-slider" min="0" max="100" value="50" class="volume-slider">
            </div>

            <div class="stats-panel">
                <h2>Statistics</h2>
                <div class="stat-item">
                    <span>Lines:</span>
                    <span id="lines">0</span>
                </div>
                <div class="stat-item">
                    <span>Time:</span>
                    <span id="time">00:00</span>
                </div>
                <div class="stat-item">
                    <span>High:</span>
                    <span id="high-score">0</span>
                </div>
                <button id="reset-high-btn" class="reset-btn" type="button">Reset High</button>
            </div>
        </section>
    </main>

    <footer class="game-footer">
        <p>&copy; 2025 Peter Adrianov</p>
    </footer>

    <!-- JavaScript modules -->
    <script type="module" src="assets/js/game.js?v=14"></script>
</body>

</html>